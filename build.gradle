plugins {
    id 'com.verificationgentleman.gradle.hdvl.systemverilog' version '0.1.0-SNAPSHOT'
}

group 'com.verificationgentleman'

sourceSets {
    main {
        svHeaders {
            srcDirs = ['sv']
        }
    }
}

extensions.xrunDir = file("$buildDir/xrun")

task runCastExample(type: Exec) {
    dependsOn genFullArgsFile
    executable 'xrun'
    args'-f', genFullArgsFile.destination.get().asFile
    def dirPath = file('examples/cast').path
    def files = new FileNameFinder().getFileNames dirPath,'*.sv'
    args files
    workingDir xrunDir
    mkdir workingDir
}

task runExplicitErrorMessageExample(type: Exec) {
    dependsOn genFullArgsFile
    executable 'xrun'
    args'-f', genFullArgsFile.destination.get().asFile
    def dirPath = file('examples/explicit_error_message').path
    def files = new FileNameFinder().getFileNames dirPath,'*.sv'
    args files
    workingDir xrunDir
    mkdir workingDir
}
